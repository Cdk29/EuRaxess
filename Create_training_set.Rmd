---
title: "Create training set"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## How to use

This rmarkdown document is meant to keep track of the creation of the train and test set to create a classifier to recollect interresting job offers from Euraxess automatically. Most of the code came from Create_training_set_and_classifier.R. 

**This document must be run using rmarkdown::render("Create_training_set.Rmd", params = "ask", output_format="github_document") in a R session.**

```{r}
library(udpipe)
library(data.table)
library(dplyr)
```

Read the offers :

```{r}
job_curated<-readRDS(file="job_offer_curated.RDS")
#head(job_curated)
dim(job_curated)
```


Head for the demo and testing :

```{r}
job_curated<-head(job_curated, 20)
```

Create data structures to keep the jobs : 

```{r}
job_empty_summary <-job_curated %>% filter(summary=="EMPTY")

job_to_examine <- job_curated %>% filter(!summary=="EMPTY")

job_of_interrest <- copy(job_curated[c(FALSE),])
head(job_of_interrest)
```

Loop to select the job offers :

```{r labelisation, echo=T, message=FALSE, warning=FALSE, cache=FALSE, results='hide'}
for (i in 1:dim(job_to_examine)[1]) {
  #print(job_to_examine[i,]$summary)
  message("\n\n\n\n\n\n\n\n\n\n")
  message(i, " offer on ", dim(job_to_examine)[1])
  message(job_to_examine[i,]$summary)
  message("\n\n\n\n\n")
  keep <- "n"
  keep <- readline("keep offer ? (press y to keep, default is n)")
  if (keep=="n") {
    job_empty_summary<-rbind(job_empty_summary, job_to_examine[i,])
  }
  if (keep=="y"){
    job_of_interrest<-rbind(job_of_interrest, job_to_examine[i,])
  }
}
```

```{r}
job_empty_summary$text<-paste(job_empty_summary$text_job, job_empty_summary$tickle_boxes)
job_of_interrest$text<-paste(job_of_interrest$text_job, job_of_interrest$tickle_boxes)
job_empty_summary$label<-0
job_of_interrest$label<-1

job<-rbind(job_empty_summary, job_of_interrest)
```


Saving the jobs offers :

```{r}
saveRDS(job, "job_labelised")
```



